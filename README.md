# Лабораторна робота №6 - REST API веб-сервіс з консольним клієнтом

У цій лабораторній роботі на основі застосунку із практичних робіт №4 та №5 було розроблено застосунок, що реалізує веб-сервіс на основі REST API, а також консольний застосунок як клієнт для створеного сервісу.

---

## Серверна частина

Вона реалізує REST API для роботи з базою даних через HTTP-запити.

- Lab4Application (main)
    - Клас є точкою входу застосунку і містить тільки метод main, з якого запускається контекст Spring Boot.
    - Позначений анотацією @SpringBootApplication, що вмикає автоконфігурацію Spring Boot, сканування компонентів і підтримку JPA.
    - Після запуску створюється вбудований веб-сервер Tomcat, який обслуговує REST API на порту 8080.

- Project (model)
    - Клас представляє сутність проєкту, яка мапиться на таблицю Projects у базі даних за допомогою JPA-анотацій.
    - Містить поля id (первинний ключ з автоінкрементом), url (унікальний URL репозиторію) і type (зв'язок Many-to-One з сутністю Type).
    - Використовується Hibernate/JPA при збереженні, читанні та оновленні проєктів через ProjectRepository та бізнес-логіку ProjectService.

- Type (model)
    - Клас представляє сутність типу проєкту, яка мапиться на таблицю Types у базі даних.
    - Містить поля id (первинний ключ) та name (унікальна назва типу) з відповідними JPA-анотаціями.
    - Використовується як ціль зв'язку Many-to-One у Project та в сервісах/репозиторіях для керування списком доступних типів проєктів.

- ProjectRepository (interface)
    - Інтерфейс репозиторію для сутності Project, який успадковується від JpaRepository і надає стандартні CRUD-операції.
    - Містить метод findByUrl для пошуку проєкту за унікальним URL та метод findAllByOrderByIdAsc для отримання всіх проєктів, відсортованих за ID.
    - Використовується в ProjectService для отримання списку проєктів, створення, оновлення, видалення та перевірки дублювання URL перед збереженням.

- TypeRepository (interface)
    - Інтерфейс репозиторію для сутності Type, який успадковується від JpaRepository з підтримкою CRUD-операцій.
    - Окрім базових методів, містить findByName для пошуку типу за унікальною назвою та findAllByOrderByIdAsc для сортування за ID.
    - Використовується в TypeService для CRUD-операцій над типами і в ProjectService для пошуку типу по імені під час створення чи оновлення проєкту.

- ProjectService (service)
    - Клас інкапсулює бізнес-логіку CRUD для проєктів та їх зв'язку з типами, відокремлюючи її від рівня представлення.
    - Використовує ProjectRepository для читання/запису таблиці Projects, перевірки існування записів та унікальності URL, а також TypeRepository для резолву типів по назві.
    - Методи createProject, updateProject, deleteProject, findById повертають результати операцій і викликаються REST-контролерами при обробці HTTP-запитів.

- TypeService (service)
    - Клас інкапсулює бізнес-логіку CRUD для типів проєктів, реалізуючи перевірки вхідних даних і роботу з репозиторієм.
    - Використовує TypeRepository для створення, оновлення, видалення та отримання списку всіх типів у відсортованому за ID вигляді.
    - Методи createType, updateType, deleteType, findById повертають результати операцій та викликаються REST-контролерами під час обробки HTTP-запитів.

- TypeDto (dto)
    - Клас для передачі даних типу через REST API у форматі JSON.
    - Містить поля id та name, які серіалізуються/десеріалізуються при обміні даними між клієнтом і сервером.

- ProjectDto (dto)
    - Клас для передачі даних проєкту через REST API у форматі JSON.
    - Містить поля id, url, typeName та typeId для представлення проєкту разом з інформацією про пов'язаний тип.

- TypeProjectDto (dto)
    - Клас для передачі даних зв'язків між типами та проєктами через REST API.
    - Містить поля projectId, typeId та typeName для відображення зв'язуючої інформації.

- ApiResponse (dto)
    - Універсальний клас для стандартизованих відповідей REST API.
    - Містить поля success (булевий прапорець успішності), message (текстове повідомлення) та data (дані відповіді).
    - Використовується REST-контролерами для формування уніфікованих відповідей на всі типи запитів.

- TypeRestController (rest)
    - REST-контролер для обробки HTTP-запитів до ресурсу /api/types.
    - Реалізує ендпоінти GET (список усіх типів, тип за ID), POST (створення), PUT (оновлення), DELETE (видалення).
    - Делегує виконання бізнес-логіки в TypeService та формує відповіді у форматі JSON з використанням ApiResponse.

- ProjectRestController (rest)
    - REST-контролер для обробки HTTP-запитів до ресурсу /api/projects.
    - Реалізує ендпоінти GET (список усіх проєктів, проєкт за ID), POST (створення), PUT (оновлення), DELETE (видалення).
    - Делегує виконання бізнес-логіки в ProjectService та формує відповіді у форматі JSON.

- TypeProjectRestController (rest)
    - REST-контролер для обробки HTTP-запитів до ресурсу /api/types-projects.
    - Реалізує ендпоінт GET для отримання списку зв'язків між типами та проєктами.
    - Використовує ProjectService для отримання даних та формує відповідь у вигляді списку TypeProjectDto.

- application.properties (configuration)
    - Файл містить налаштування підключення до СУБД, параметри драйвера, URL, логін/пароль, а також властивості Hibernate/JPA.
    - Також містить налаштування порту веб-сервера (server.port=8080) для REST API.
    - Використовується Spring Boot для автоматичної конфігурації DataSource, EntityManagerFactory та вбудованого веб-сервера Tomcat.

---

## Клієнтська частина

Вона реалізує консольний інтерфейс для взаємодії з REST API сервера.

- ClientApplication (main)
    - Клас є точкою входу консольного клієнта і містить тільки метод main, який створює екземпляр ConsoleMenu та запускає його.
    - Не потребує Spring Framework, працює як звичайний Java-застосунок.

- ApiClient (client)
    - Клас інкапсулює логіку HTTP-запитів до REST API сервера.
    - Використовує java.net.http.HttpClient для відправки GET, POST, PUT, DELETE запитів та бібліотеку Gson для серіалізації/десеріалізації JSON.
    - Містить методи для всіх CRUD-операцій з типами (getAllTypes, createType, updateType, deleteType) та проєктами (getAllProjects, createProject, updateProject, deleteProject), а також метод getTypesProjects для отримання зв'язуючої таблиці.

- ConsoleMenu (client)
    - Клас реалізує консольний інтерфейс для взаємодії з REST API.
    - Показує головне меню з пунктами для роботи з таблицями Типи, Проєкти та Типи Проєктів, читає введення користувача через Scanner.
    - Містить методи handleTypes, handleProjects, handleTypesProjects для обробки відповідних пунктів меню з валідацією введених команд (C/U/D або q).
    - Делегує виконання HTTP-запитів в ApiClient та виводить результати операцій у консоль.

- TablePrinter (client)
    - Клас надає статичний утилітний метод printTable, який приймає список заголовків та список рядків і виводить таблицю з вирівнюванням колонок по лівому краю в консолі.
    - Динамічно обчислює ширину кожної колонки як максимум між довжиною заголовка і всіх значень у цій колонці, після чого формує форматний рядок для System.out.printf.
    - Використовується у ConsoleMenu для красивого форматування виводу таблиць Типи, Проєкти та зв'язуючої таблиці Типи Проєктів.

- pom.xml (configuration)
    - Файл конфігурації Maven для клієнтського застосунку.
    - Містить залежність Gson для роботи з JSON та плагін exec-maven-plugin для зручного запуску клієнта командою ./mvnw compile exec:java.
